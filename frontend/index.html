<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sri Lanka Dengue Forecast</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="page">
    <header class="header">
      <div>
        <h1>Sri Lanka Dengue Forecast</h1>
        <p class="subtitle">XGBoost Regression • FastAPI Backend</p>
      </div>
      <div class="badge">Demo App</div>
    </header>

    <main class="layout">
      <!-- LEFT: Form -->
      <section class="card">
        <h2>Enter inputs</h2>
        <p class="muted">Select a district + month, add weather and recent case counts.</p>

        <div class="grid">
          <div class="field">
            <label>District</label>
            <select id="district">
              <option value="">-- Select a District --</option>
              <option value="Colombo">Colombo (Western)</option>
              <option value="Galle">Galle (Southern)</option>
              <option value="Kandy">Kandy (Central)</option>
              <option value="Matara">Matara (Southern)</option>
              <option value="Jaffna">Jaffna (Northern)</option>
              <option value="Gampaha">Gampaha (Western)</option>
              <option value="Kalutara">Kalutara (Western)</option>
              <option value="Kurunegala">Kurunegala (North Western)</option>
              <option value="Puttalam">Puttalam (North Western)</option>
              <option value="Anuradhapura">Anuradhapura (North Central)</option>
              <option value="Polonnaruwa">Polonnaruwa (North Central)</option>
              <option value="Matale">Matale (Central)</option>
              <option value="Nuwara Eliya">Nuwara Eliya (Central)</option>
              <option value="Kegalle">Kegalle (Sabaragamuwa)</option>
              <option value="Ratnapura">Ratnapura (Sabaragamuwa)</option>
              <option value="Badulla">Badulla (Uva)</option>
              <option value="Moneragala">Moneragala (Uva)</option>
              <option value="Ampara">Ampara (Eastern)</option>
              <option value="Batticaloa">Batticaloa (Eastern)</option>
              <option value="Trincomalee">Trincomalee (Eastern)</option>
              <option value="Vavuniya">Vavuniya (Northern)</option>
              <option value="Kilinochchi">Kilinochchi (Northern)</option>
              <option value="Mulativu">Mulativu (Northern)</option>
              <option value="Mannar">Mannar (Northern)</option>
              <option value="Hambantota">Hambantota (Southern)</option>
            </select>
          </div>

          <div class="field">
            <label>Month</label>
            <select id="month">
              <option value="">-- Select a Month --</option>
              <option value="1">January (1)</option>
              <option value="2">February (2)</option>
              <option value="3">March (3)</option>
              <option value="4">April (4)</option>
              <option value="5">May (5)</option>
              <option value="6" selected>June (6)</option>
              <option value="7">July (7)</option>
              <option value="8">August (8)</option>
              <option value="9">September (9)</option>
              <option value="10">October (10)</option>
              <option value="11">November (11)</option>
              <option value="12">December (12)</option>
            </select>
          </div>

          <div class="field">
            <label>Temp_avg (°C)</label>
            <input id="temp" type="number" step="0.01" placeholder="e.g., 27.5" />
          </div>

          <div class="field">
            <label>Precipitation_avg</label>
            <input id="rain" type="number" step="0.01" placeholder="e.g., 1.2" />
          </div>

          <div class="field">
            <label>Humidity_avg (%)</label>
            <input id="hum" type="number" step="0.01" placeholder="e.g., 75.0" />
          </div>

          <div class="field">
            <label>Cases_lag1 (last month)</label>
            <input id="lag1" type="number" step="1" placeholder="e.g., 120" />
          </div>

          <div class="field">
            <label>Cases_lag2</label>
            <input id="lag2" type="number" step="1" placeholder="e.g., 110" />
          </div>

          <div class="field">
            <label>Cases_lag3</label>
            <input id="lag3" type="number" step="1" placeholder="e.g., 105" />
          </div>
        </div>

        <button id="predictBtn" class="btn">
          <span class="btnText">Predict</span>
          <span class="spinner" id="spinner" aria-hidden="true"></span>
        </button>

        <div id="status" class="status"></div>
      </section>

      <!-- Output -->
      <section class="card output">
        <h2>Prediction</h2>
        <p class="muted">Your forecast will appear here.</p>

        <div class="resultBox">
          <div class="big" id="predValue">—</div>
          <div class="meta" id="predMeta">District: — • Month: —</div>
        </div>

        <div class="divider"></div>

        <h3>How to interpret</h3>
        <ul class="list">
          <li><b>Lag features</b> (previous month cases) influence predictions the most.</li>
          <li><b>Weather</b> (humidity & rainfall) contributes moderately to outbreak intensity.</li>
          <li>This is a <b>decision-support</b> tool — not a final medical decision system.</li>
          <li>Enter dengue cases from the previous 3 months (caselag1, caselag2, caselag3). This helps the model capture recent outbreak patterns.</li>
        </ul>
      </section>
    </main>

    <footer class="footer">
      <span>Backend: FastAPI • Model: XGBoost • Explainability: SHAP</span>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>